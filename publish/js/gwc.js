"use strict";var dataarr=JSON.parse(localStorage.getItem("shoppingCart"))||[];console.log(dataarr);var table=document.querySelector("table"),sum=document.getElementById("sum");function render(){var t=dataarr.every(function(t){return t.isChecked});console.log(t);var e=' <thead>\n              <tr>\n                  <th><input class="allCheck" type="checkbox" '+(t?"checked":"")+' >全选</th>\n                  <th scope="col">商品ID</th>\n                  <th scope="col">商品名称</th>\n                  <th scope="col">商品价格</th>\n                  <th scope="col">数量</th>\n                  <th scope="col">操作</th>\n                  <th scope="col">删除</th>\n              </tr>\n          </thead>\n          <tbody >';dataarr.forEach(function(t){e+='\n              <tr>\n                  <th scope="row"><input data-id="'+t.id+'" class="singleCheck" '+(t.isChecked?"checked":"")+' type="checkbox"/></th>\n                  <th scope="row">'+t.id+'</th>\n                  <td  title="'+t.pricedetail+'"><span style="display: inline-block;width: 300px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;">'+t.pricedetail+'</span></td>\n                  <td style=" color:red">'+t.postalicon+"</td>\n                  <td>"+t.count+'</td>\n                  <td><button type="button" class="btn increase" data-id="'+t.id+'">+</button ><button type="button" data-id="'+t.id+'" class="btn decrease">-</button></td>\n                  <td class="d-flex justify-content-md-center"><button type="button" class="close" aria-label="关闭">\n                      <span class="del" aria-hidden="true" data-id="'+t.id+'" >&times;</span>\n                    </button></td>\n              </tr>\n          '}),e+="</tbody>",dataarr.length||(e="<h1 ><a href='./listpage.html'>您的购物车空空如也，请去挑选一些商品吧！！！</a></h1>"),table.innerHTML=e}function checkin(){var a=0;dataarr.forEach(function(t){var e;t.isChecked&&(e=t.postalicon.slice(1,-3),console.log(e),console.log(t.count),a+=e*t.count)}),sum.innerHTML="￥"+a,dataarr.length||(sum.parentNode.style.display="none")}function update(){localStorage.setItem("shoppingCart",JSON.stringify(dataarr))}render(),checkin(),table.onclick=function(e){if("allCheck"===e.target.className)return dataarr.forEach(function(t){t.isChecked=e.target.checked}),render(),void checkin();if("singleCheck"===e.target.className){var a=e.target.getAttribute("data-id"),t=dataarr.find(function(t){return t.id===a});return console.log(t),t.isChecked=e.target.checked,render(),checkin(),void update()}if(e.target.className.includes("increase")){a=e.target.getAttribute("data-id");return(t=dataarr.find(function(t){return t.id===a})).count++,render(),checkin(),void update()}if(e.target.className.includes("decrease")){a=e.target.getAttribute("data-id");return(t=dataarr.find(function(t){return t.id===a})).count--,t.count<=0&&(t.count=0),render(),checkin(),void update()}if("del"===e.target.className){var a=e.target.getAttribute("data-id"),n=dataarr.findIndex(function(t){return t.id===a});return dataarr.splice(n,1),render(),checkin(),void update()}};
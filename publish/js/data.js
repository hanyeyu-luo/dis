"use strict";var sj=document.getElementById("sj"),ul=document.createElement("ul");ul.style.padding="top:10px";var chaow=document.getElementById("chaow"),oul=document.createElement("ul"),dataarr=[];$.ajax({type:"GET",url:"../json/data.json",data:"data",dataType:"json",success:function(t){dataarr=t.arr,t.arr.forEach(function(t,e){var i='   <div style="width:200px;height: 100%; float:left; padding:10px">\n            <div style = "felx:1">\n                <a href="detailpagebut.html?id='+t.id+'">\n                    <div>\n                        <img style="width:200px"src="'+t.src+'"alt="">\n                    </div>\n            </div>\n            <div style="width: 200px;">\n                <div\n                    style=" font-size: 14px;display: -webkit-box;-webkit-box-orient: vertical;-webkit-line-clamp: 2;overflow: hidden;">\n                    '+t.pricedetail+'</div>\n                <div style="color:red; text-align: center; font-size: 20px;">'+t.postalicon+"\n                </div></a>               \n            </div>\n         ";ul.innerHTML+=i,sj.appendChild(ul)})}}),sj.onclick=function(t){var e;"button"===t.target.tagName.toLowerCase()&&(e=t.target.getAttribute("data-id"),console.log("当前点的是按钮，商品id是"+e));var i=dataarr.find(function(t){return t.id+="",t.id===e});console.log(i);var l=localStorage.getItem("shoppingCart")||"[]",a=JSON.parse(l),s=a.find(function(t){return t.id===e});s?s.count++:(i.count=1,a.push(i)),localStorage.setItem("shoppingCart",JSON.stringify(a))};var $leftBtn=$("#leftBtn"),$rightBtn=$("#rightBtn"),$box=$("#box"),$carousel=$("#carousel"),$cirs=$("#cirs"),$list=$carousel.children("li"),$listd=$cirs.children("li"),idx=0;function fylf(){$listd.each(function(t,e){t===idx?$(e).addClass("active"):$(e).removeClass("active")})}$leftBtn.click(function(){$list.removeClass("active"),$list.eq(idx).addClass("active").css({left:800}),--idx<0&&(idx=7),$list.eq(idx).addClass("active").css({left:0}),$carousel.css({left:-800}).animate({left:0},1e3,function(){fylf()})}),$rightBtn.click(function(){$list.removeClass("active"),$list.eq(idx).addClass("active").css("left",0),$carousel.css("left",0),7<++idx&&(idx=0),$list.eq(idx).addClass("active").css("left",800),$carousel.css({left:0}).animate({left:-800},1e3,function(){fylf()})}),$listd.each(function(t,e){$(e).click(function(){t!=idx&&(t<idx?($list.removeClass("active"),$list.eq(idx).addClass("active").css({left:800}),idx=t,$list.eq(idx).addClass("active").css({left:0}),$carousel.css({left:-800}).stop().animate({left:0},1e3,function(){fylf()})):idx<t&&($list.removeClass("active"),$list.eq(idx).addClass("active").css("left",0),$carousel.css("left",0),idx=t,$list.eq(idx).addClass("active").css("left",800),$carousel.css({left:0}).animate({left:-800},1e3,function(){fylf()})))})});var time=setInterval(function(){$rightBtn.trigger("click")},2e3);$box.mouseenter(function(){clearInterval(time),console.log(111)}),$box.mouseleave(function(){time=setInterval(function(){$rightBtn.trigger("click")},2e3)});